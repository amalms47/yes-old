$(function(){getphoto(),$.validator.setDefaults({errorClass:"help-block",highlight:function(e){$(e).closest(".form-group  ").addClass("has-error")},unhighlight:function(e){$(e).closest(".form-group ").removeClass("has-error")}}),$.validator.addMethod("pattern",function(e,t,r){return!!this.optional(t)||("string"==typeof r&&(r=new RegExp("^(?:"+r+")$")),r.test(e))},"Invalid input information."),$("#loginform").validate({rules:{username:{required:!0,pattern:"[a-zA-Z0-9#@_!*%$&?]{8,32}"},password:{required:!0,pattern:"[a-zA-Z0-9#@_!*%$&?]{8,32}"}},messages:{username:{required:"Please enter  the username .",pattern:"Please enter correct username"},password:{required:"Please enter  the password.",pattern:"Please enter correct password"}}})});var getphoto=function(){$("#username").on("focusout",function(e){e.preventDefault(),$.post(site_url+"getadminphoto",{username:$("#username").val()},function(e){$("#photo").attr("src",e.photo)})})};$(document).ajaxStart(function(e){$(e.target.activeElement).hasClass("btn")&&$(".overlay").removeClass("hidden")}),$(document).ajaxStop(function(e){$(e.target.activeElement).hasClass("btn")&&$(".overlay").addClass("hidden")});var signin=function(){$("#loginform").on("submit",function(e){if(e.preventDefault(),!$("#loginform").valid())return!1;var t=$("#loginform").serialize();$.post("secure-signin",t,function(e){0==e.error?window.location.href=e.url:($("#message").html(e.message),$("#message").css("color","red"))})})};