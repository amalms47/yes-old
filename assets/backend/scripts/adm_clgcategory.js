$(function(){$.validator.setDefaults({errorClass:"help-block",highlight:function(t){$(t).closest(".form-group  ").addClass("has-error")},unhighlight:function(t){$(t).closest(".form-group ").removeClass("has-error")}}),$.validator.addMethod("pattern",function(t,e,a){return!!this.optional(e)||("string"==typeof a&&(a=new RegExp("^(?:"+a+")$")),a.test(t))},"Invalid input information."),$("#newcatform").validate({rules:{newcatname:{required:!0}},messages:{newcatname:{required:"Please enter the course name ."}}}),$("#searchclg").on("keyup",function(){getcategory(1)}),getcategory(1),newcategory()});var newcategory=function(){$("#catsubmit").on("click",function(){if(event.preventDefault(),!$("#newcatform").valid())return!1;var t=$("#newcatname").val();$.post(site_url+"Administrator/savenewclgCat",{category:t},function(t){$("#newcatname").val(""),getcategory(1),$("#custom_message").html(t.message),$("#alertmodal").modal({backdrop:"static",keyboard:!1})})}),getcategory(1)},getcategory=function(t){var e=$("#searchclg").val();$.post(site_url+"Administrator/getClgCategory",{page:t,search:e},function(t){$("#collegescount").html(t.num);var e="",a=1;if(0===t.error){var r=t.content;for(var o in r){var n=r[o],c="Active";0==n.active&&(c="Blocked");var i="Active",l='<td><button  class="btn-flat  btn-success" onclick="updatecat('+n.id+","+n.active+')">'+i+"</button></td>";1==n.active&&(i="Block",l='<td><button  class="btn-flat  btn-danger" onclick="updatecat('+n.id+","+n.active+')">'+i+"</button></td>"),e+="<tr>",e+="<td>"+a+"</td>",a++,e+="<td>"+n.category+"</td>",e+="<td>"+n.date+"</td>",e+="<td>"+c+"</td>",e+=l,e+="</tr>",$("#notactivated").html(e)}var s="",g=t.pagecount;s+=' <ul class="pagination pagination-sm  pull-right" style="margin:0px;"><li><a  href="javascript:void(0);" onclick="getcategory(1)">«</a></li>';for(a=1;a<=g;a++)s+=' <li><a  href="javascript:void(0);" onclick="getcategory('+a+')">'+a+"</a></li>";s+='<li><a href="javascript:void(0);"  onclick="getcategory('+g+')">»</a></li>',$("#notcollegepage").html(s)}else 1===t.error&&(e+=t.message,$("#notactivated").html(e))})},updatecat=function(t,e){var a=1;1==e&&(a=0),$.post(site_url+"Administrator/updateclgCategory",{id:t,flag:a},function(t){getcategory(1)})};