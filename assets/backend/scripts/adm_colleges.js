$(function(){loadcategory(),$("#clgcategory").change(function(){getcolleges(1)}),$('input[type="radio"].category').iCheck({radioClass:"iradio_flat-blue"}),$('input[type="radio"].choice').iCheck({radioClass:"iradio_flat-blue"});var e=function(e){1==e?$("#categorysection").slideDown("slow"):0==e&&$("#categorysection").slideUp("slow")};e(1),$(".choice").on("ifChecked ",function(t){var l=$("input[name='option']:checked").val();e(l),getcolleges(1)}),$(".category").on("ifChecked ",function(e){$("input[name='category']:checked").val();getcolleges(1)})});var loadcategory=function(){$.post(site_url+"Administrator/getCategorydropdown",function(e){t="";if("0"==e.error){var t='<option value="">All Category</option>',l=e.content;for(var a in l){var s=l[a];t+='<option value="'+s.category+'" >'+s.category+"</option>"}}$("#clgcategory").html(t)},"json")},getcolleges=function(e){var t=$("#search").val(),l={option:$("input[name='option']:checked").val(),category:$("#clgcategory").val(),page:e,search:t};$.post(site_url+"Administrator/getcolleges",l,function(e){var t="";if(0==e.error){var l=e.colleges;for(var a in l){var s=l[a],o='<span class="pull-right badge bg-green-active">Yes</span>',i="Block";1==s.isblocked&&(o='<span class="pull-right badge bg-red-active">No</span>',i="Unblock"),t+='<div class="col-md-4">',t+='<div class="box box-widget widget-user-2 " style="border:1px solid #ecf0f5">',t+='<div class="widget-user-header bg-blue-active text-center">',t+='<div><img class="img-circle" src="'+s.logo+'" style="width:120px;height:120px;" alt="User Avatars"></div>',t+='<h6 class="page-header" style="font-size: medium">'+s.title+" </h6><h5>"+s.subtitle+"</h5>",t+="</div>",t+='<div class="box-footer no-padding">',t+='<ul class="nav nav-stacked">',t+='<li><a href="javascript:void(0);">Administrator<span class="pull-right ">'+s.username+"</span></a></li>",t+='<li><a href="javascript:void(0);">Email ID<span class="pull-right ">'+s.emailid+"</span></a></li>",t+='<li><a href="javascript:void(0);">Mobile number<span class="pull-right ">+91 '+s.contactno+"</span></a></li>",t+='<li><a href="javascript:void(0);">Account Active'+o+"</a></li>",t+="</ul>",t+="</div>",t+='<div class="box-footer">',t+='<div class="pull-right">',t+='<button type="button" class="btn btn-primary btn-xs" title="view college details" onclick=details('+s.id+')><i class="fa fa-eye"></i> View</button>&nbsp;',t+='<button type="button" class="btn btn-primary btn-xs" title="view college courses"  onclick=courses('+s.id+')><i class="fa fa-list"></i> Courses</button>&nbsp;',t+='<button type="button" class="btn btn-primary btn-xs" title="view college features"  onclick=features('+s.id+')><i class="fa fa-list"></i> Features</button>&nbsp;',t+='<button type="submit" class="btn btn-danger btn-xs" title="de-activate college account"  onclick=collegestatus('+s.id+","+s.isblocked+')><i class="fa  fa-ban"></i>'+i+"</button>&nbsp;",t+="</div>",t+="</div>",t+="</div>",t+="</div>"}var c="",r=e.page_count;c+=' <ul class="pagination pagination-sm  pull-right" style="margin:0px;"><li><a  href="javascript:void(0);" onclick="getcolleges(1)">«</a></li>';for(var n=1;n<=r;n++)c+=' <li><a  href="javascript:void(0);" onclick="getcolleges('+n+')">'+n+"</a></li>";c+='<li><a href="javascript:void(0);"  onclick="getcolleges('+r+')">»</a></li>',$("#collegepage").html(c)}else t="no information found at server",$("#collegepage").html("");$("#collegebody").html(t)})},test=function(){alert("pok")},searchcollege=function(){$("#search").on("keyup",function(){getcolleges(1)})},details=function(e){$.post("Administrator/getcollegebyid",{id:e},function(e){$("#title").html(e.colleges.title),$("#ccover").css({background:"url('"+e.colleges.cover+"') center center"}),$("#clogo").attr("src",e.colleges.logo),$("#username").html(e.colleges.title),$("#subtitle").html(e.colleges.subtitle),$("#mapcode").html(e.colleges.mapcode),$("#mapcode").find("iframe").css({width:"260px",height:"200px"}),$("#address1").html(e.colleges.address),$("#address2").html(e.colleges.city+", "+e.colleges.district+"(district)"),$("#address3").html(e.colleges.state+"(state), pin."+e.colleges.pincode),$("#category").html(e.colleges.type),$("#university").html(e.colleges.university),$("#phoneno").html(e.colleges.contactno),$("#emailid").html(e.colleges.emailid),$("#faxno").html(e.colleges.faxno),$("#brochure").attr("href",e.colleges.brochure),$("#hurl").attr("href",e.colleges.url),$("#url").html(e.colleges.url),$("#details").html(e.colleges.content),$("#shortname").html(e.colleges.shortname),$("#location").html(e.colleges.state),$("#locatio2").html(e.colleges.district)}),$("#collegeform").modal({keyboard:!1,backdrop:"static"})},collegestatus=function(e,t){var l="1";1==t&&(l=0),$.post("Administrator/changecollegeactive",{id:e,isblocked:l},function(e){getcolleges(1),$("#ccustom_message").html(e.message),setTimeout(function(){$("#ccustom_message").html("")},2500)})},courses=function(e){$.post(site_url+"Administrator/getCourseById",{inst_id:e},function(e){console.log(e);var t="";if(0==e.iserror){var l=e.courses;for(var a in l){var s=l[a],o="seats not available";"1"===s.isavailable&&(o="seats available");var i="";null!=s.feesstructure&&(i='<a target="_blank" href="'+e.url+"/"+s.feesstructure+'">&nbsp;view fee structure</a>'),t+='<div class="panel box  box-warning">',t+='<div class="box-header with-border">',t+='<h4 class="box-title">',t+='<a data-toggle="collapse" data-parent="#accordion" href="#collapse'+s.couid+'" aria-expanded="false" class="collapsed">',t+=s.name+" ( "+s.shortname+" )",t+="</a>",t+="</h4>",t+='<div class="pull-right"><label><input type="button" style="display:none" class="btn btn-xs" >'+o+"</label>&nbsp;",t+=i,t+="</div>",t+='<div id="collapse'+s.couid+'" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">',t+='<div class="box-body">',t+='<div class="row">',t+='<div class="col-xs-12  col-sm-12 col-md-12 col-lg-12">',t+='<div class="col-xs-12  col-sm-12 col-md-12 col-lg-4 table-responsive">',t+='<table class="table table-striped">',t+="<tbody>",t+="<tr><th>Category</th><td>"+s.categoryname+"</td></tr>",t+="<tr><th>Level</th><td>"+s.level+" </td></tr>",t+="<tr><th>Scheme</th><td>"+s.scheme+" </td></tr>",t+="<tr><th>Seats</th><td>"+s.seats+"</td></tr>",t+="<tr><th>Duration</th><td>"+s.duration+"</td></tr>",t+="<tr><th> Fees</th><td> Rs."+s.fees+"/-</td></tr>",t+="</tbody>",t+="</table>",t+="</div>",t+='<div class="col-xs-12  col-sm-12 col-md-12 col-lg-8 invoice-col text-justify">',t+="<h5><b>Eligibility Criteria</b></h5>",t+=s.eligibility+"</div>",t+='<div class="col-xs-12  col-sm-12 col-md-12 col-lg-8 invoice-col text-justify">',t+="<h5><b>Short Details</b><h5>",t+=s.details+"</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>",t+="</div>"}}else t+="<h2>Sorry No uploaded course found at Server</h2>";$("#ins_courses").html(t),$('input[type="checkbox"].minimal, input[type="radio"].minimal').iCheck({checkboxClass:"icheckbox_flat-blue"}),$("#collegecourse").modal({keyboard:!1,backdrop:"static"})})},features=function(e){$.post("Administrator/getFeature",{institute:e},function(e){var t="";if(0==e.iserror){var l=e.features;for(var a in l){var s=l[a];t+='<div class="panel box  box-warning">',t+='<div class="box-header with-border">',t+='<h4 class="box-title">',t+='<a data-toggle="collapse" data-parent="#accordion" href="#collapse'+s.id+'" aria-expanded="false" class="collapsed">',t+=s.title,t+="</a>",t+="</h4>",t+='<div id="collapse'+s.id+'" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">',t+='<div class="box-body">',t+=' <div class="attachment-block clearfix">',t+='<img class="attachment-img" src="'+s.picture+'" alt="Attachment Image">',t+=' <div class="attachment-pushed" style="padding-left:5px;">',t+='<div class="attachment-text" >',t+=s.content,t+="    </div>",t+="     </div>",t+="   </div>",t+="</div>",t+="</div>",t+="</div>"}}else t+="<h2>Sorry No uploaded course found at Server</h2>";$("#ins_feature").html(t)}),$("#collegefeat").modal({keyboard:!1,backdrop:"static"})};